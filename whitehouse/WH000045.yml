# TODO: THIS IS NOT A VALID FILE, IT NEEDS TO BE UPDATED

# YAML conversion from whitehouse.py
#
# The bioguide has been made up since the whitehouse doesn't have one.
# Cleverly, it's `WH` for _W_hite _H_ouse and `45` for current president.
# Should be safe since bioguide IDs only have one letter at beginning.
#
# Functions for interacting with the White House Contact page
# NB: If the contact form is ever updated, this will break
#
#
# Heads Up:
#   - Mailing address only has one field, but could be multiple lines
#   - Message length max of 32000 chars
#   - Last name, email max of 80 chars
#   - Phone number max of 40 chars
#   - Postal code max of 20 chars

bioguide: WH000045
contact_form:
  method: post
  action: "https://wh45.secure.force.com/PublicForms/apex/VisualAntidote__FFNSubmitEndpoint"
  steps:
    - visit: "https://forms.whitehouse.gov/contact/"
    - select:
      - name: Contact.Case.B.Who_are_you_trying_to_contact__c
        selector: "#Contact.Case.B.Who_are_you_trying_to_contact__c"
        value: $TOPIC
        required: true
        options:
          - "Contact the President"
          - "Help with a Federal Agency"
    - wait:
      - value: 2
    - fill_in:
      - name: Contact.FirstName
        selector: "#Contact.FirstName"
        value: $NAME_FIRST
        required: true
      - name: Contact.LastName
        selector: "#Contact.LastName"
        value: $NAME_LAST
        required: true
      - name: Contact.Email
        selector: "#Contact.Email"
        value: $EMAIL
        required: true
      - name: Contact.HomePhone
        selector: "#Contact.HomePhone"
        value: $PHONE
        required: true
      - name: Contact.MailingStreet
        selector: "#Contact.MailingStreet"
        value: $ADDRESS_STREET
        required: true
      - name: Contact.MailingCity
        selector: "#Contact.MailingCity"
        value: $ADDRESS_CITY
        required: true
      - name: Contact.MailingPostalCode
        selector: "#Contact.MailingPostalCode"
        value: $ADDRESS_ZIP5
        required: true
      - name: Contact.Case.B.Description
        selector: "#Contact.Case.B.Description"
        value: $MESSAGE
        required: false
    - select:
      - name: Contact.Salutation
        selector: "#Contact.Salutation"
        value: $NAME_PREFIX
        required: false
        options:
          - Mr
          - Ms.
          - Mrs.
          - Dr.
      - name: Contact.Local_State__c
        selector: "#Contact.Local_State__c"
        value: $ADDRESS_STATE
        required: true
        options:
          - Alabama
          - Alaska
          - American Samoa
          - Arizona
          - Arkansas
          - Armed Forces Americas
          - Armed Forces Europe
          - Armed Forces Pacific
          - California
          - Colorado
          - Connecticut
          - Delaware
          - District of Columbia
          - Federated Micronesia
          - Florida
          - Georgia
          - Guam
          - Hawaii
          - Idaho
          - Illinois
          - Indiana
          - Iowa
          - Kansas
          - Kentucky
          - Louisiana
          - Maine
          - Marshall Islands
          - Maryland
          - Massachusetts
          - Michigan
          - Minnesota
          - Mississippi
          - Missouri
          - Montana
          - Nebraska
          - Nevada
          - New Hampshire
          - New Jersey
          - New Mexico
          - New York
          - North Carolina
          - North Dakota
          - Northern Mariana Islands
          - Ohio
          - Oklahoma
          - Oregon
          - Palau
          - Pennsylvania
          - Puerto Rico
          - Rhode Island
          - South Carolina
          - South Dakota
          - Tennessee
          - Texas
          - U.S. Virgin Islands
          - United States Minor Outlying Islands
          - Utah
          - Vermont
          - Virginia
          - Washington
          - West Virginia
          - Wisconsin
          - Wyoming
    - uncheck:
      - name: Contact.Contact_Us_Email_Opt_In__c
        selector: "#Contact.Contact_Us_Email_Opt_In__c"
    - javascript:
      - value: document.querySelector("#Contact.Case.B.Description").value = document.querySelector("#Contact.Case.B.Description").value.replace(/"/g, '');
    - javascript:
      - value: "Array.prototype.forEach.call(document.querySelectorAll('style,[rel=\"stylesheet\"],[type=\"text/css\"]'), function(element){ try{ element.parentNode.removeChild(element) } catch(err){} });"
    - click_on:
      - value: Send
        selector: "#btnsubmit"
  success:
    headers:
      status: 200
    body:
      contains: Thank you for your submission!